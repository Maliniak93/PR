2020-11-29 11:10:35.004 +01:00 [DBG] Hosting starting
2020-11-29 11:10:35.122 +01:00 [INF] User profile is available. Using 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-11-29 11:10:35.147 +01:00 [DBG] Reading data from file 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys\key-9ddaac00-31ec-441e-b630-664712695a2f.xml'.
2020-11-29 11:10:35.154 +01:00 [DBG] Reading data from file 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys\key-a36c8582-4099-4086-ac0c-fa2b681b647b.xml'.
2020-11-29 11:10:35.161 +01:00 [DBG] Found key {9ddaac00-31ec-441e-b630-664712695a2f}.
2020-11-29 11:10:35.165 +01:00 [DBG] Found key {a36c8582-4099-4086-ac0c-fa2b681b647b}.
2020-11-29 11:10:35.173 +01:00 [DBG] Considering key {a36c8582-4099-4086-ac0c-fa2b681b647b} with expiration date 2021-01-03 20:24:43Z as default key.
2020-11-29 11:10:35.182 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-11-29 11:10:35.187 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-11-29 11:10:35.189 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-11-29 11:10:35.193 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-11-29 11:10:35.197 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-11-29 11:10:35.200 +01:00 [DBG] Using key {a36c8582-4099-4086-ac0c-fa2b681b647b} as the default key.
2020-11-29 11:10:35.202 +01:00 [DBG] Key ring with default key {a36c8582-4099-4086-ac0c-fa2b681b647b} was loaded during application startup.
2020-11-29 11:10:35.531 +01:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-29 11:10:35.564 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: B19BE56B0B3907835A2512BD77C9170A2F5F4AFF)
2020-11-29 11:10:35.570 +01:00 [INF] Now listening on: https://localhost:5001
2020-11-29 11:10:35.571 +01:00 [INF] Now listening on: http://localhost:5000
2020-11-29 11:10:35.572 +01:00 [DBG] Loaded hosting startup assembly ProgramowanieRozproszone_1
2020-11-29 11:10:35.573 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-29 11:10:35.574 +01:00 [INF] Hosting environment: Development
2020-11-29 11:10:35.577 +01:00 [INF] Content root path: C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1
2020-11-29 11:10:35.579 +01:00 [DBG] Hosting started
2020-11-29 11:10:42.321 +01:00 [DBG] Connection id "0HM4K9S3P1BE1" accepted.
2020-11-29 11:10:42.325 +01:00 [DBG] Connection id "0HM4K9S3P1BE1" started.
2020-11-29 11:10:42.399 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 11:10:42.404 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-29 11:10:42.405 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:10:42.433 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:10:42.438 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:10:42.440 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:10:42.934 +01:00 [INF] Successfully validated the token.
2020-11-29 11:10:42.936 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:10:42.941 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:10:42.951 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-29 11:10:42.974 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:10:42.978 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:10:42.979 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:10:42.980 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:10:42.982 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:10:42.983 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:10:42.985 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:10:43.075 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2020-11-29 11:10:43.112 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:10:43.114 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:43.116 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:43.118 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:43.119 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:43.124 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:10:43.128 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:43.129 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:43.130 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:43.132 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:43.138 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 149.5317ms
2020-11-29 11:10:43.142 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:10:43.144 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 11:10:43.222 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 813.7230 ms
2020-11-29 11:10:43.225 +01:00 [DBG] Connection id "0HM4K9S3P1BE1" completed keep alive response.
2020-11-29 11:10:43.227 +01:00 [INF] Request finished in 830.8767ms 500 text/plain
2020-11-29 11:10:43.234 +01:00 [DBG] Connection id "0HM4K9S3P1BE1", Request id "0HM4K9S3P1BE1:00000001": started reading request body.
2020-11-29 11:10:43.236 +01:00 [DBG] Connection id "0HM4K9S3P1BE1", Request id "0HM4K9S3P1BE1:00000001": done reading request body.
2020-11-29 11:10:43.242 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 11:10:43.243 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:10:43.244 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:10:43.246 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:10:43.247 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:10:43.249 +01:00 [INF] Successfully validated the token.
2020-11-29 11:10:43.251 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:10:43.252 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:10:43.267 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:10:43.270 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:10:43.271 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:10:43.272 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:10:43.274 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:10:43.275 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:10:43.276 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:10:43.277 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:10:43.278 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:43.279 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:43.281 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:43.282 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:43.283 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:10:43.604 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 11:10:43.740 +01:00 [DBG] queryContext => new QueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache, 
    null, 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, int[], ResultCoordinator, Patient>, 
    ProgramowanieRozproszone_1.Model.DataContext, 
    null
)
2020-11-29 11:10:43.768 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 11:10:43.809 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (37ms).
2020-11-29 11:10:43.816 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:10:44.559 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:10:44.571 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:bd9e7e42-059f-4979-bc3f-a6f139a5e3d6
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:bd9e7e42-059f-4979-bc3f-a6f139a5e3d6
Error Number:40615,State:1,Class:14
2020-11-29 11:10:44.585 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:44.588 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:44.590 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:44.592 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:44.594 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 1318.4664ms
2020-11-29 11:10:44.596 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:10:44.598 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:bd9e7e42-059f-4979-bc3f-a6f139a5e3d6
Error Number:40615,State:1,Class:14
2020-11-29 11:10:44.622 +01:00 [ERR] HTTP GET /api/patients responded 500 in 1377.5603 ms
2020-11-29 11:10:44.629 +01:00 [DBG] Connection id "0HM4K9S3P1BE1" completed keep alive response.
2020-11-29 11:10:44.632 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 11:10:44.636 +01:00 [INF] Request finished in 1393.9593ms 500 text/plain
2020-11-29 11:10:47.623 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 11:10:47.629 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:10:47.631 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:10:47.632 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:10:47.634 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:10:47.638 +01:00 [INF] Successfully validated the token.
2020-11-29 11:10:47.639 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:10:47.641 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:10:47.642 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:10:47.644 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:10:47.645 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:10:47.646 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:10:47.648 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:10:47.649 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:10:47.651 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:10:47.654 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:10:47.656 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:47.657 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:47.658 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:47.659 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:47.661 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:10:47.662 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:47.663 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:47.665 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:47.666 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:47.667 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 16.5056ms
2020-11-29 11:10:47.669 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:10:47.670 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 11:10:47.677 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 46.4703 ms
2020-11-29 11:10:47.678 +01:00 [DBG] Connection id "0HM4K9S3P1BE1" completed keep alive response.
2020-11-29 11:10:47.680 +01:00 [INF] Request finished in 58.4662ms 500 text/plain
2020-11-29 11:10:47.681 +01:00 [DBG] Connection id "0HM4K9S3P1BE1", Request id "0HM4K9S3P1BE1:00000003": started reading request body.
2020-11-29 11:10:47.682 +01:00 [DBG] Connection id "0HM4K9S3P1BE1", Request id "0HM4K9S3P1BE1:00000003": done reading request body.
2020-11-29 11:10:47.683 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 11:10:47.683 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:10:47.684 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:10:47.685 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:10:47.687 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:10:47.688 +01:00 [INF] Successfully validated the token.
2020-11-29 11:10:47.689 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:10:47.690 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:10:47.691 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:10:47.692 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:10:47.693 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:10:47.694 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:10:47.696 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:10:47.697 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:10:47.698 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:10:47.700 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:10:47.702 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:47.703 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:47.704 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:47.705 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:47.706 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:10:47.733 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 11:10:47.736 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 11:10:47.737 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2020-11-29 11:10:47.738 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:10:48.040 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:10:48.046 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0a37a866-b54c-46d4-8e76-796f2ddc2bec
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0a37a866-b54c-46d4-8e76-796f2ddc2bec
Error Number:40615,State:1,Class:14
2020-11-29 11:10:48.056 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:48.057 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:10:48.058 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:48.060 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:10:48.061 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 362.4045ms
2020-11-29 11:10:48.062 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:10:48.063 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:0a37a866-b54c-46d4-8e76-796f2ddc2bec
Error Number:40615,State:1,Class:14
2020-11-29 11:10:48.079 +01:00 [ERR] HTTP GET /api/patients responded 500 in 395.1360 ms
2020-11-29 11:10:48.082 +01:00 [DBG] Connection id "0HM4K9S3P1BE1" completed keep alive response.
2020-11-29 11:10:48.083 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 11:10:48.085 +01:00 [INF] Request finished in 402.3802ms 500 text/plain
2020-11-29 11:10:52.110 +01:00 [DBG] Connection id "0HM4K9S3P1BE1" reset.
2020-11-29 11:10:52.120 +01:00 [DBG] Connection id "0HM4K9S3P1BE1" sending FIN because: "The client closed the connection."
2020-11-29 11:10:52.121 +01:00 [DBG] Connection id "0HM4K9S3P1BE1" disconnecting.
2020-11-29 11:10:52.126 +01:00 [DBG] Connection id "0HM4K9S3P1BE1" stopped.
2020-11-29 11:11:34.904 +01:00 [DBG] Connection id "0HM4K9S3P1BE2" accepted.
2020-11-29 11:11:34.906 +01:00 [DBG] Connection id "0HM4K9S3P1BE2" started.
2020-11-29 11:11:34.939 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 11:11:34.940 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:11:34.942 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:11:34.943 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:11:34.946 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:11:34.954 +01:00 [INF] Successfully validated the token.
2020-11-29 11:11:34.963 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:11:34.965 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:11:34.973 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:11:34.991 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:11:34.994 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:11:35.011 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:11:35.018 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:11:35.021 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:11:35.023 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:11:35.025 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:11:35.027 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:11:35.029 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:11:35.033 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:11:35.035 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:11:35.037 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:11:35.039 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:11:35.040 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:11:35.042 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:11:35.044 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:11:35.048 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 25.6706ms
2020-11-29 11:11:35.052 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:11:35.053 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 11:11:35.065 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 123.1549 ms
2020-11-29 11:11:35.068 +01:00 [DBG] Connection id "0HM4K9S3P1BE2" completed keep alive response.
2020-11-29 11:11:35.069 +01:00 [INF] Request finished in 130.5894ms 500 text/plain
2020-11-29 11:11:35.071 +01:00 [DBG] Connection id "0HM4K9S3P1BE2", Request id "0HM4K9S3P1BE2:00000001": started reading request body.
2020-11-29 11:11:35.072 +01:00 [DBG] Connection id "0HM4K9S3P1BE2", Request id "0HM4K9S3P1BE2:00000001": done reading request body.
2020-11-29 11:11:35.125 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 11:11:35.126 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:11:35.127 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:11:35.128 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:11:35.130 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:11:35.132 +01:00 [INF] Successfully validated the token.
2020-11-29 11:11:35.133 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:11:35.135 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:11:35.138 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:11:35.140 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:11:35.142 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:11:35.143 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:11:35.145 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:11:35.146 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:11:35.148 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:11:35.157 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:11:35.158 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:11:35.160 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:11:35.162 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:11:35.163 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:11:35.164 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:11:35.177 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 11:11:35.182 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 11:11:35.185 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2020-11-29 11:11:35.187 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:11:35.621 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:11:35.623 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:1e5494a4-6032-4770-82b1-0cf6f61e993e
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:1e5494a4-6032-4770-82b1-0cf6f61e993e
Error Number:40615,State:1,Class:14
2020-11-29 11:11:35.639 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:11:35.644 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:11:35.645 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:11:35.647 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:11:35.648 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 500.3811ms
2020-11-29 11:11:35.651 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:11:35.652 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:1e5494a4-6032-4770-82b1-0cf6f61e993e
Error Number:40615,State:1,Class:14
2020-11-29 11:11:35.674 +01:00 [ERR] HTTP GET /api/patients responded 500 in 546.5887 ms
2020-11-29 11:11:35.676 +01:00 [DBG] Connection id "0HM4K9S3P1BE2" completed keep alive response.
2020-11-29 11:11:35.677 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 11:11:35.678 +01:00 [INF] Request finished in 552.8163ms 500 text/plain
2020-11-29 11:11:42.311 +01:00 [DBG] Connection id "0HM4K9S3P1BE2" reset.
2020-11-29 11:11:42.321 +01:00 [DBG] Connection id "0HM4K9S3P1BE2" sending FIN because: "The client closed the connection."
2020-11-29 11:11:42.324 +01:00 [DBG] Connection id "0HM4K9S3P1BE2" disconnecting.
2020-11-29 11:11:42.326 +01:00 [DBG] Connection id "0HM4K9S3P1BE2" stopped.
2020-11-29 11:16:00.065 +01:00 [DBG] Hosting starting
2020-11-29 11:16:00.166 +01:00 [INF] User profile is available. Using 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-11-29 11:16:00.178 +01:00 [DBG] Reading data from file 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys\key-9ddaac00-31ec-441e-b630-664712695a2f.xml'.
2020-11-29 11:16:00.185 +01:00 [DBG] Reading data from file 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys\key-a36c8582-4099-4086-ac0c-fa2b681b647b.xml'.
2020-11-29 11:16:00.192 +01:00 [DBG] Found key {9ddaac00-31ec-441e-b630-664712695a2f}.
2020-11-29 11:16:00.196 +01:00 [DBG] Found key {a36c8582-4099-4086-ac0c-fa2b681b647b}.
2020-11-29 11:16:00.203 +01:00 [DBG] Considering key {a36c8582-4099-4086-ac0c-fa2b681b647b} with expiration date 2021-01-03 20:24:43Z as default key.
2020-11-29 11:16:00.212 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-11-29 11:16:00.215 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-11-29 11:16:00.216 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-11-29 11:16:00.221 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-11-29 11:16:00.225 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-11-29 11:16:00.229 +01:00 [DBG] Using key {a36c8582-4099-4086-ac0c-fa2b681b647b} as the default key.
2020-11-29 11:16:00.230 +01:00 [DBG] Key ring with default key {a36c8582-4099-4086-ac0c-fa2b681b647b} was loaded during application startup.
2020-11-29 11:16:00.529 +01:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-29 11:16:00.555 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: B19BE56B0B3907835A2512BD77C9170A2F5F4AFF)
2020-11-29 11:16:00.562 +01:00 [INF] Now listening on: https://localhost:5001
2020-11-29 11:16:00.564 +01:00 [INF] Now listening on: http://localhost:5000
2020-11-29 11:16:00.565 +01:00 [DBG] Loaded hosting startup assembly ProgramowanieRozproszone_1
2020-11-29 11:16:00.566 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-29 11:16:00.567 +01:00 [INF] Hosting environment: Development
2020-11-29 11:16:00.568 +01:00 [INF] Content root path: C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1
2020-11-29 11:16:00.569 +01:00 [DBG] Hosting started
2020-11-29 11:16:05.999 +01:00 [DBG] Connection id "0HM4K9V47S2V7" accepted.
2020-11-29 11:16:06.002 +01:00 [DBG] Connection id "0HM4K9V47S2V7" started.
2020-11-29 11:16:06.076 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 11:16:06.081 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-29 11:16:06.082 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:16:06.108 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:16:06.112 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:16:06.114 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:16:06.608 +01:00 [INF] Successfully validated the token.
2020-11-29 11:16:06.611 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:16:06.615 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:16:06.624 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-29 11:16:06.647 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:16:06.651 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:16:06.653 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:16:06.654 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:16:06.657 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:16:06.658 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:16:06.660 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:16:06.719 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2020-11-29 11:16:06.744 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:16:06.746 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:06.748 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:06.749 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:06.751 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:06.757 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:16:06.762 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:06.764 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:06.765 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:06.767 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:06.773 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 109.0081ms
2020-11-29 11:16:06.778 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:16:06.781 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 11:16:06.832 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 747.6394 ms
2020-11-29 11:16:06.835 +01:00 [DBG] Connection id "0HM4K9V47S2V7" completed keep alive response.
2020-11-29 11:16:06.837 +01:00 [INF] Request finished in 765.7903ms 500 text/plain
2020-11-29 11:16:06.844 +01:00 [DBG] Connection id "0HM4K9V47S2V7", Request id "0HM4K9V47S2V7:00000001": started reading request body.
2020-11-29 11:16:06.847 +01:00 [DBG] Connection id "0HM4K9V47S2V7", Request id "0HM4K9V47S2V7:00000001": done reading request body.
2020-11-29 11:16:06.852 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 11:16:06.855 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:16:06.857 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:16:06.858 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:16:06.860 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:16:06.862 +01:00 [INF] Successfully validated the token.
2020-11-29 11:16:06.863 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:16:06.864 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:16:06.878 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:16:06.881 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:16:06.882 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:16:06.884 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:16:06.887 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:16:06.888 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:16:06.891 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:16:06.893 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:16:06.895 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:06.896 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:06.898 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:06.899 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:06.901 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:16:07.285 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 11:16:07.414 +01:00 [DBG] queryContext => new QueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache, 
    null, 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, int[], ResultCoordinator, Patient>, 
    ProgramowanieRozproszone_1.Model.DataContext, 
    null
)
2020-11-29 11:16:07.446 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 11:16:07.478 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (26ms).
2020-11-29 11:16:07.485 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:16:08.055 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:16:08.069 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:a8891117-9811-468d-933a-26e67b5bb24e
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:a8891117-9811-468d-933a-26e67b5bb24e
Error Number:40615,State:1,Class:14
2020-11-29 11:16:08.096 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:08.099 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:08.105 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:08.108 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:08.111 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 1220.269ms
2020-11-29 11:16:08.114 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:16:08.118 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:a8891117-9811-468d-933a-26e67b5bb24e
Error Number:40615,State:1,Class:14
2020-11-29 11:16:08.148 +01:00 [ERR] HTTP GET /api/patients responded 500 in 1291.5126 ms
2020-11-29 11:16:08.151 +01:00 [DBG] Connection id "0HM4K9V47S2V7" completed keep alive response.
2020-11-29 11:16:08.153 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 11:16:08.159 +01:00 [INF] Request finished in 1306.9412ms 500 text/plain
2020-11-29 11:16:17.824 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 11:16:17.828 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:16:17.831 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:16:17.834 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:16:17.837 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:16:17.843 +01:00 [INF] Successfully validated the token.
2020-11-29 11:16:17.845 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:16:17.846 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:16:17.848 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:16:17.851 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:16:17.852 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:16:17.854 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:16:17.856 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:16:17.860 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:16:17.861 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:16:17.865 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:16:17.866 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:17.868 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:17.869 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:17.870 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:17.875 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:16:17.877 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:17.878 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:17.879 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:17.881 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:17.882 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 21.3618ms
2020-11-29 11:16:17.884 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:16:17.885 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 11:16:17.897 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 66.1582 ms
2020-11-29 11:16:17.898 +01:00 [DBG] Connection id "0HM4K9V47S2V7" completed keep alive response.
2020-11-29 11:16:17.900 +01:00 [INF] Request finished in 76.0048ms 500 text/plain
2020-11-29 11:16:17.901 +01:00 [DBG] Connection id "0HM4K9V47S2V7", Request id "0HM4K9V47S2V7:00000003": started reading request body.
2020-11-29 11:16:17.901 +01:00 [DBG] Connection id "0HM4K9V47S2V7", Request id "0HM4K9V47S2V7:00000003": done reading request body.
2020-11-29 11:16:17.903 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 11:16:17.906 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:16:17.907 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:16:17.908 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:16:17.910 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:16:17.911 +01:00 [INF] Successfully validated the token.
2020-11-29 11:16:17.912 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:16:17.913 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:16:17.914 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:16:17.916 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:16:17.917 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:16:17.918 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:16:17.925 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:16:17.926 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:16:17.927 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:16:17.929 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:16:17.930 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:17.932 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:17.933 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:17.934 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:17.938 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:16:17.966 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 11:16:17.969 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 11:16:17.970 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2020-11-29 11:16:17.971 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:16:18.305 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:16:18.308 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:1d5b4170-98e7-46c4-b03e-8bd9be4b72fb
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:1d5b4170-98e7-46c4-b03e-8bd9be4b72fb
Error Number:40615,State:1,Class:14
2020-11-29 11:16:18.323 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:18.324 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:16:18.326 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:18.331 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:16:18.334 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 406.4149ms
2020-11-29 11:16:18.335 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:16:18.337 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:1d5b4170-98e7-46c4-b03e-8bd9be4b72fb
Error Number:40615,State:1,Class:14
2020-11-29 11:16:18.367 +01:00 [ERR] HTTP GET /api/patients responded 500 in 460.1868 ms
2020-11-29 11:16:18.370 +01:00 [DBG] Connection id "0HM4K9V47S2V7" completed keep alive response.
2020-11-29 11:16:18.372 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 11:16:18.373 +01:00 [INF] Request finished in 470.0141ms 500 text/plain
2020-11-29 11:16:19.698 +01:00 [DBG] Connection id "0HM4K9V47S2V7" reset.
2020-11-29 11:16:19.704 +01:00 [DBG] Connection id "0HM4K9V47S2V7" sending FIN because: "The client closed the connection."
2020-11-29 11:16:19.715 +01:00 [DBG] Connection id "0HM4K9V47S2V7" disconnecting.
2020-11-29 11:16:19.728 +01:00 [DBG] Connection id "0HM4K9V47S2V7" stopped.
2020-11-29 11:16:22.714 +01:00 [INF] Application is shutting down...
2020-11-29 11:16:22.715 +01:00 [DBG] Hosting stopping
2020-11-29 11:16:22.721 +01:00 [DBG] Hosting stopped
2020-11-29 11:19:42.110 +01:00 [DBG] Hosting starting
2020-11-29 11:19:42.217 +01:00 [INF] User profile is available. Using 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-11-29 11:19:42.228 +01:00 [DBG] Reading data from file 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys\key-9ddaac00-31ec-441e-b630-664712695a2f.xml'.
2020-11-29 11:19:42.237 +01:00 [DBG] Reading data from file 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys\key-a36c8582-4099-4086-ac0c-fa2b681b647b.xml'.
2020-11-29 11:19:42.243 +01:00 [DBG] Found key {9ddaac00-31ec-441e-b630-664712695a2f}.
2020-11-29 11:19:42.249 +01:00 [DBG] Found key {a36c8582-4099-4086-ac0c-fa2b681b647b}.
2020-11-29 11:19:42.260 +01:00 [DBG] Considering key {a36c8582-4099-4086-ac0c-fa2b681b647b} with expiration date 2021-01-03 20:24:43Z as default key.
2020-11-29 11:19:42.270 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-11-29 11:19:42.273 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-11-29 11:19:42.275 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-11-29 11:19:42.280 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-11-29 11:19:42.284 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-11-29 11:19:42.288 +01:00 [DBG] Using key {a36c8582-4099-4086-ac0c-fa2b681b647b} as the default key.
2020-11-29 11:19:42.289 +01:00 [DBG] Key ring with default key {a36c8582-4099-4086-ac0c-fa2b681b647b} was loaded during application startup.
2020-11-29 11:19:42.589 +01:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-29 11:19:42.619 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: B19BE56B0B3907835A2512BD77C9170A2F5F4AFF)
2020-11-29 11:19:42.625 +01:00 [INF] Now listening on: https://localhost:5001
2020-11-29 11:19:42.627 +01:00 [INF] Now listening on: http://localhost:5000
2020-11-29 11:19:42.628 +01:00 [DBG] Loaded hosting startup assembly ProgramowanieRozproszone_1
2020-11-29 11:19:42.630 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-29 11:19:42.631 +01:00 [INF] Hosting environment: Development
2020-11-29 11:19:42.632 +01:00 [INF] Content root path: C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1
2020-11-29 11:19:42.634 +01:00 [DBG] Hosting started
2020-11-29 11:19:42.819 +01:00 [INF] Application is shutting down...
2020-11-29 11:19:42.820 +01:00 [DBG] Hosting stopping
2020-11-29 11:19:42.826 +01:00 [DBG] Hosting stopped
2020-11-29 11:19:46.455 +01:00 [DBG] Hosting starting
2020-11-29 11:19:46.566 +01:00 [INF] User profile is available. Using 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-11-29 11:19:46.578 +01:00 [DBG] Reading data from file 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys\key-9ddaac00-31ec-441e-b630-664712695a2f.xml'.
2020-11-29 11:19:46.587 +01:00 [DBG] Reading data from file 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys\key-a36c8582-4099-4086-ac0c-fa2b681b647b.xml'.
2020-11-29 11:19:46.593 +01:00 [DBG] Found key {9ddaac00-31ec-441e-b630-664712695a2f}.
2020-11-29 11:19:46.597 +01:00 [DBG] Found key {a36c8582-4099-4086-ac0c-fa2b681b647b}.
2020-11-29 11:19:46.604 +01:00 [DBG] Considering key {a36c8582-4099-4086-ac0c-fa2b681b647b} with expiration date 2021-01-03 20:24:43Z as default key.
2020-11-29 11:19:46.612 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-11-29 11:19:46.615 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-11-29 11:19:46.617 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-11-29 11:19:46.621 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-11-29 11:19:46.624 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-11-29 11:19:46.627 +01:00 [DBG] Using key {a36c8582-4099-4086-ac0c-fa2b681b647b} as the default key.
2020-11-29 11:19:46.628 +01:00 [DBG] Key ring with default key {a36c8582-4099-4086-ac0c-fa2b681b647b} was loaded during application startup.
2020-11-29 11:19:46.927 +01:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-29 11:19:46.953 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: B19BE56B0B3907835A2512BD77C9170A2F5F4AFF)
2020-11-29 11:19:46.959 +01:00 [INF] Now listening on: https://localhost:5001
2020-11-29 11:19:46.960 +01:00 [INF] Now listening on: http://localhost:5000
2020-11-29 11:19:46.961 +01:00 [DBG] Loaded hosting startup assembly ProgramowanieRozproszone_1
2020-11-29 11:19:46.962 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-29 11:19:46.963 +01:00 [INF] Hosting environment: Development
2020-11-29 11:19:46.964 +01:00 [INF] Content root path: C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1
2020-11-29 11:19:46.966 +01:00 [DBG] Hosting started
2020-11-29 11:19:52.267 +01:00 [DBG] Connection id "0HM4KA17LN45C" accepted.
2020-11-29 11:19:52.270 +01:00 [DBG] Connection id "0HM4KA17LN45C" started.
2020-11-29 11:19:52.366 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 11:19:52.409 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-29 11:19:52.412 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:19:52.451 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:19:52.454 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:19:52.456 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:19:52.949 +01:00 [INF] Successfully validated the token.
2020-11-29 11:19:52.952 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:19:52.956 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:19:52.965 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-29 11:19:52.988 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:19:52.991 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:19:52.992 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:19:52.994 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:19:52.996 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:19:52.997 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:19:52.999 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:53.057 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2020-11-29 11:19:53.083 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:53.086 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:53.088 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:53.089 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:53.091 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:53.097 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:19:53.101 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:53.102 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:53.104 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:53.105 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:53.111 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 108.5576ms
2020-11-29 11:19:53.116 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:19:53.118 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 11:19:53.169 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 753.9570 ms
2020-11-29 11:19:53.172 +01:00 [DBG] Connection id "0HM4KA17LN45C" completed keep alive response.
2020-11-29 11:19:53.177 +01:00 [INF] Request finished in 830.5299ms 500 text/plain
2020-11-29 11:19:53.182 +01:00 [DBG] Connection id "0HM4KA17LN45C", Request id "0HM4KA17LN45C:00000001": started reading request body.
2020-11-29 11:19:53.185 +01:00 [DBG] Connection id "0HM4KA17LN45C", Request id "0HM4KA17LN45C:00000001": done reading request body.
2020-11-29 11:19:53.191 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 11:19:53.192 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:19:53.193 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:19:53.194 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:19:53.196 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:19:53.198 +01:00 [INF] Successfully validated the token.
2020-11-29 11:19:53.199 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:19:53.201 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:19:53.211 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:19:53.215 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:19:53.216 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:19:53.218 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:19:53.219 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:19:53.223 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:19:53.225 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:53.227 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:53.228 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:53.229 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:53.231 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:53.233 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:53.235 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:19:53.561 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 11:19:53.671 +01:00 [DBG] queryContext => new QueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache, 
    null, 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, int[], ResultCoordinator, Patient>, 
    ProgramowanieRozproszone_1.Model.DataContext, 
    null
)
2020-11-29 11:19:53.699 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 11:19:53.725 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (22ms).
2020-11-29 11:19:53.732 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:19:54.471 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:19:54.482 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:a6d5ddfb-d839-43bf-87a6-c2111b51f9f1
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:a6d5ddfb-d839-43bf-87a6-c2111b51f9f1
Error Number:40615,State:1,Class:14
2020-11-29 11:19:54.503 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:54.505 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:54.507 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:54.509 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:54.514 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 1289.5137ms
2020-11-29 11:19:54.516 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:19:54.518 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:a6d5ddfb-d839-43bf-87a6-c2111b51f9f1
Error Number:40615,State:1,Class:14
2020-11-29 11:19:54.542 +01:00 [ERR] HTTP GET /api/patients responded 500 in 1348.8245 ms
2020-11-29 11:19:54.545 +01:00 [DBG] Connection id "0HM4KA17LN45C" completed keep alive response.
2020-11-29 11:19:54.547 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 11:19:54.551 +01:00 [INF] Request finished in 1360.6153ms 500 text/plain
2020-11-29 11:19:56.182 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 11:19:56.188 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:19:56.190 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:19:56.192 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:19:56.195 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:19:56.199 +01:00 [INF] Successfully validated the token.
2020-11-29 11:19:56.201 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:19:56.202 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:19:56.204 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:19:56.209 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:19:56.211 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:19:56.212 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:19:56.214 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:19:56.216 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:19:56.218 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:56.223 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:56.227 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:56.229 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:56.232 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:56.235 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:56.236 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:19:56.238 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:56.242 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:56.244 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:56.245 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:56.247 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 28.8099ms
2020-11-29 11:19:56.251 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:19:56.257 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 11:19:56.268 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 77.7780 ms
2020-11-29 11:19:56.269 +01:00 [DBG] Connection id "0HM4KA17LN45C" completed keep alive response.
2020-11-29 11:19:56.271 +01:00 [INF] Request finished in 90.3199ms 500 text/plain
2020-11-29 11:19:56.274 +01:00 [DBG] Connection id "0HM4KA17LN45C", Request id "0HM4KA17LN45C:00000003": started reading request body.
2020-11-29 11:19:56.276 +01:00 [DBG] Connection id "0HM4KA17LN45C", Request id "0HM4KA17LN45C:00000003": done reading request body.
2020-11-29 11:19:56.278 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 11:19:56.279 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:19:56.280 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:19:56.282 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:19:56.284 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:19:56.286 +01:00 [INF] Successfully validated the token.
2020-11-29 11:19:56.288 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:19:56.289 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:19:56.291 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:19:56.293 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:19:56.295 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:19:56.296 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:19:56.299 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:19:56.300 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:19:56.305 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:56.306 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:56.308 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:56.310 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:56.312 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:56.313 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:56.317 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:19:56.351 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 11:19:56.353 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 11:19:56.354 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2020-11-29 11:19:56.355 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:19:56.599 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:19:56.603 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9729f745-c2f2-4bc3-ab9a-3065b4a12d32
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9729f745-c2f2-4bc3-ab9a-3065b4a12d32
Error Number:40615,State:1,Class:14
2020-11-29 11:19:56.635 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:56.642 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:56.646 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:56.649 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:56.651 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 346.8338ms
2020-11-29 11:19:56.653 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:19:56.654 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:9729f745-c2f2-4bc3-ab9a-3065b4a12d32
Error Number:40615,State:1,Class:14
2020-11-29 11:19:56.696 +01:00 [ERR] HTTP GET /api/patients responded 500 in 415.7505 ms
2020-11-29 11:19:56.709 +01:00 [DBG] Connection id "0HM4KA17LN45C" completed keep alive response.
2020-11-29 11:19:56.713 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 11:19:56.720 +01:00 [INF] Request finished in 441.4876ms 500 text/plain
2020-11-29 11:19:57.552 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 11:19:57.559 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:19:57.564 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:19:57.565 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:19:57.567 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:19:57.570 +01:00 [INF] Successfully validated the token.
2020-11-29 11:19:57.571 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:19:57.572 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:19:57.573 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:19:57.577 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:19:57.578 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:19:57.579 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:19:57.582 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:19:57.583 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:19:57.585 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:57.587 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:57.588 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:57.592 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:57.594 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:57.595 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:57.597 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:19:57.599 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:57.600 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:57.601 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:57.603 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:57.604 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 19.8506ms
2020-11-29 11:19:57.606 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:19:57.611 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 11:19:57.623 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 58.9846 ms
2020-11-29 11:19:57.626 +01:00 [DBG] Connection id "0HM4KA17LN45C" completed keep alive response.
2020-11-29 11:19:57.627 +01:00 [INF] Request finished in 76.1308ms 500 text/plain
2020-11-29 11:19:57.629 +01:00 [DBG] Connection id "0HM4KA17LN45C", Request id "0HM4KA17LN45C:00000005": started reading request body.
2020-11-29 11:19:57.630 +01:00 [DBG] Connection id "0HM4KA17LN45C", Request id "0HM4KA17LN45C:00000005": done reading request body.
2020-11-29 11:19:57.633 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 11:19:57.634 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:19:57.635 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:19:57.636 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:19:57.637 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:19:57.642 +01:00 [INF] Successfully validated the token.
2020-11-29 11:19:57.643 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:19:57.644 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:19:57.645 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:19:57.647 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:19:57.649 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:19:57.651 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:19:57.656 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:19:57.658 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:19:57.659 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:57.661 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:57.662 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:57.664 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:57.666 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:57.667 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:57.672 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:19:57.679 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 11:19:57.682 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 11:19:57.683 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2020-11-29 11:19:57.684 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:19:57.931 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:19:57.934 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:16da5991-63c0-49f8-8c05-0f92d901b438
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:16da5991-63c0-49f8-8c05-0f92d901b438
Error Number:40615,State:1,Class:14
2020-11-29 11:19:57.949 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:57.951 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:57.955 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:57.957 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:57.958 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 298.9646ms
2020-11-29 11:19:57.960 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:19:57.961 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:16da5991-63c0-49f8-8c05-0f92d901b438
Error Number:40615,State:1,Class:14
2020-11-29 11:19:57.984 +01:00 [ERR] HTTP GET /api/patients responded 500 in 349.5913 ms
2020-11-29 11:19:57.987 +01:00 [DBG] Connection id "0HM4KA17LN45C" completed keep alive response.
2020-11-29 11:19:57.989 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 11:19:57.990 +01:00 [INF] Request finished in 357.1986ms 500 text/plain
2020-11-29 11:19:58.750 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 11:19:58.756 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:19:58.757 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:19:58.758 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:19:58.760 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:19:58.762 +01:00 [INF] Successfully validated the token.
2020-11-29 11:19:58.763 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:19:58.764 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:19:58.766 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:19:58.769 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:19:58.770 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:19:58.772 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:19:58.777 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:19:58.778 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:19:58.780 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:58.783 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:58.784 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:58.786 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:58.787 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:58.791 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:58.792 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:19:58.794 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:58.795 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:58.797 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:58.799 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:58.800 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 20.1896ms
2020-11-29 11:19:58.802 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:19:58.803 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 11:19:58.814 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 57.9478 ms
2020-11-29 11:19:58.816 +01:00 [DBG] Connection id "0HM4KA17LN45C" completed keep alive response.
2020-11-29 11:19:58.817 +01:00 [INF] Request finished in 67.4644ms 500 text/plain
2020-11-29 11:19:58.818 +01:00 [DBG] Connection id "0HM4KA17LN45C", Request id "0HM4KA17LN45C:00000007": started reading request body.
2020-11-29 11:19:58.819 +01:00 [DBG] Connection id "0HM4KA17LN45C", Request id "0HM4KA17LN45C:00000007": done reading request body.
2020-11-29 11:19:58.823 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 11:19:58.824 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:19:58.825 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:19:58.826 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:19:58.827 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:19:58.829 +01:00 [INF] Successfully validated the token.
2020-11-29 11:19:58.830 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:19:58.832 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:19:58.834 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:19:58.838 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:19:58.840 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:19:58.841 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:19:58.843 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:19:58.844 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:19:58.846 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:58.847 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:19:58.849 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:58.853 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:58.854 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:58.856 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:58.857 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:19:58.859 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 11:19:58.861 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 11:19:58.862 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2020-11-29 11:19:58.863 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:19:59.187 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:19:59.190 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:dca3d7cb-7e14-422e-9028-1c87757295b6
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:dca3d7cb-7e14-422e-9028-1c87757295b6
Error Number:40615,State:1,Class:14
2020-11-29 11:19:59.208 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:59.209 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:19:59.211 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:59.212 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:19:59.214 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 367.8698ms
2020-11-29 11:19:59.215 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:19:59.217 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:dca3d7cb-7e14-422e-9028-1c87757295b6
Error Number:40615,State:1,Class:14
2020-11-29 11:19:59.242 +01:00 [ERR] HTTP GET /api/patients responded 500 in 417.6354 ms
2020-11-29 11:19:59.245 +01:00 [DBG] Connection id "0HM4KA17LN45C" completed keep alive response.
2020-11-29 11:19:59.246 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 11:19:59.249 +01:00 [INF] Request finished in 425.3299ms 500 text/plain
2020-11-29 11:20:00.084 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 11:20:00.086 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:20:00.087 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:20:00.088 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:20:00.090 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:20:00.093 +01:00 [INF] Successfully validated the token.
2020-11-29 11:20:00.093 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:20:00.094 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:20:00.096 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:20:00.098 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:20:00.099 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:20:00.101 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:20:00.102 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:20:00.104 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:20:00.108 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:20:00.110 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:20:00.111 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:00.113 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:00.115 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:00.116 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:00.118 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:20:00.119 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:00.121 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:00.125 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:00.127 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:00.128 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 20.5203ms
2020-11-29 11:20:00.132 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:20:00.133 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 11:20:00.145 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 58.0345 ms
2020-11-29 11:20:00.146 +01:00 [DBG] Connection id "0HM4KA17LN45C" completed keep alive response.
2020-11-29 11:20:00.147 +01:00 [INF] Request finished in 63.266ms 500 text/plain
2020-11-29 11:20:00.149 +01:00 [DBG] Connection id "0HM4KA17LN45C", Request id "0HM4KA17LN45C:00000009": started reading request body.
2020-11-29 11:20:00.151 +01:00 [DBG] Connection id "0HM4KA17LN45C", Request id "0HM4KA17LN45C:00000009": done reading request body.
2020-11-29 11:20:00.152 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 11:20:00.155 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:20:00.156 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:20:00.157 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:20:00.159 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:20:00.161 +01:00 [INF] Successfully validated the token.
2020-11-29 11:20:00.161 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:20:00.162 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:20:00.164 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:20:00.167 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:20:00.170 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:20:00.171 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:20:00.173 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:20:00.175 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:20:00.176 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:20:00.178 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:20:00.179 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:00.181 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:00.183 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:00.187 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:00.188 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:20:00.190 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 11:20:00.192 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 11:20:00.193 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2020-11-29 11:20:00.194 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:20:00.395 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:20:00.407 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:02c59013-7324-405c-ba6b-64f90da1503e
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:02c59013-7324-405c-ba6b-64f90da1503e
Error Number:40615,State:1,Class:14
2020-11-29 11:20:00.428 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:00.429 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:00.436 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:00.438 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:00.440 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 263.7463ms
2020-11-29 11:20:00.441 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:20:00.442 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:02c59013-7324-405c-ba6b-64f90da1503e
Error Number:40615,State:1,Class:14
2020-11-29 11:20:00.465 +01:00 [ERR] HTTP GET /api/patients responded 500 in 308.7628 ms
2020-11-29 11:20:00.467 +01:00 [DBG] Connection id "0HM4KA17LN45C" completed keep alive response.
2020-11-29 11:20:00.469 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 11:20:00.470 +01:00 [INF] Request finished in 318.0264ms 500 text/plain
2020-11-29 11:20:01.195 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 11:20:01.198 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:20:01.201 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:20:01.203 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:20:01.207 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:20:01.212 +01:00 [INF] Successfully validated the token.
2020-11-29 11:20:01.215 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:20:01.217 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:20:01.220 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:20:01.225 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:20:01.230 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:20:01.235 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:20:01.239 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:20:01.244 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:20:01.249 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:20:01.254 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:20:01.263 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:01.265 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:01.268 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:01.270 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:01.272 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:20:01.275 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:01.276 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:01.278 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:01.279 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:01.281 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 31.9817ms
2020-11-29 11:20:01.283 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 11:20:01.284 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 11:20:01.296 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 95.8816 ms
2020-11-29 11:20:01.299 +01:00 [DBG] Connection id "0HM4KA17LN45C" completed keep alive response.
2020-11-29 11:20:01.300 +01:00 [INF] Request finished in 105.0094ms 500 text/plain
2020-11-29 11:20:01.301 +01:00 [DBG] Connection id "0HM4KA17LN45C", Request id "0HM4KA17LN45C:0000000B": started reading request body.
2020-11-29 11:20:01.302 +01:00 [DBG] Connection id "0HM4KA17LN45C", Request id "0HM4KA17LN45C:0000000B": done reading request body.
2020-11-29 11:20:01.306 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 11:20:01.307 +01:00 [VRB] All hosts are allowed.
2020-11-29 11:20:01.307 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 11:20:01.309 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 11:20:01.310 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:20:01.312 +01:00 [INF] Successfully validated the token.
2020-11-29 11:20:01.313 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 11:20:01.315 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:20:01.316 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 11:20:01.320 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 11:20:01.322 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 11:20:01.323 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 11:20:01.325 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 11:20:01.326 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 11:20:01.327 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:20:01.329 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 11:20:01.330 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:01.332 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:01.333 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:01.337 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:01.339 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 11:20:01.341 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 11:20:01.343 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 11:20:01.343 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2020-11-29 11:20:01.344 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:20:01.588 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 11:20:01.591 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:80504566-9641-4d1e-a401-a8d89f02f81d
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:80504566-9641-4d1e-a401-a8d89f02f81d
Error Number:40615,State:1,Class:14
2020-11-29 11:20:01.608 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:01.610 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 11:20:01.612 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:01.613 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 11:20:01.618 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 290.5195ms
2020-11-29 11:20:01.620 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 11:20:01.622 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:80504566-9641-4d1e-a401-a8d89f02f81d
Error Number:40615,State:1,Class:14
2020-11-29 11:20:01.645 +01:00 [ERR] HTTP GET /api/patients responded 500 in 338.1208 ms
2020-11-29 11:20:01.649 +01:00 [DBG] Connection id "0HM4KA17LN45C" completed keep alive response.
2020-11-29 11:20:01.651 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 11:20:01.652 +01:00 [INF] Request finished in 346.2224ms 500 text/plain
2020-11-29 11:20:02.055 +01:00 [DBG] Connection id "0HM4KA17LN45C" reset.
2020-11-29 11:20:02.081 +01:00 [DBG] Connection id "0HM4KA17LN45C" sending FIN because: "The client closed the connection."
2020-11-29 11:20:02.085 +01:00 [DBG] Connection id "0HM4KA17LN45C" disconnecting.
2020-11-29 11:20:02.090 +01:00 [DBG] Connection id "0HM4KA17LN45C" stopped.
2020-11-29 12:22:00.960 +01:00 [DBG] Hosting starting
2020-11-29 12:22:01.056 +01:00 [INF] User profile is available. Using 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-11-29 12:22:01.067 +01:00 [DBG] Reading data from file 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys\key-9ddaac00-31ec-441e-b630-664712695a2f.xml'.
2020-11-29 12:22:01.072 +01:00 [DBG] Reading data from file 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys\key-a36c8582-4099-4086-ac0c-fa2b681b647b.xml'.
2020-11-29 12:22:01.077 +01:00 [DBG] Found key {9ddaac00-31ec-441e-b630-664712695a2f}.
2020-11-29 12:22:01.081 +01:00 [DBG] Found key {a36c8582-4099-4086-ac0c-fa2b681b647b}.
2020-11-29 12:22:01.088 +01:00 [DBG] Considering key {a36c8582-4099-4086-ac0c-fa2b681b647b} with expiration date 2021-01-03 20:24:43Z as default key.
2020-11-29 12:22:01.095 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-11-29 12:22:01.098 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-11-29 12:22:01.099 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-11-29 12:22:01.103 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-11-29 12:22:01.106 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-11-29 12:22:01.109 +01:00 [DBG] Using key {a36c8582-4099-4086-ac0c-fa2b681b647b} as the default key.
2020-11-29 12:22:01.110 +01:00 [DBG] Key ring with default key {a36c8582-4099-4086-ac0c-fa2b681b647b} was loaded during application startup.
2020-11-29 12:22:01.384 +01:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-29 12:22:01.410 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: B19BE56B0B3907835A2512BD77C9170A2F5F4AFF)
2020-11-29 12:22:01.417 +01:00 [INF] Now listening on: https://localhost:5001
2020-11-29 12:22:01.419 +01:00 [INF] Now listening on: http://localhost:5000
2020-11-29 12:22:01.420 +01:00 [DBG] Loaded hosting startup assembly ProgramowanieRozproszone_1
2020-11-29 12:22:01.421 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-29 12:22:01.421 +01:00 [INF] Hosting environment: Development
2020-11-29 12:22:01.422 +01:00 [INF] Content root path: C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1
2020-11-29 12:22:01.424 +01:00 [DBG] Hosting started
2020-11-29 12:22:14.297 +01:00 [DBG] Hosting starting
2020-11-29 12:22:14.405 +01:00 [INF] User profile is available. Using 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-11-29 12:22:14.415 +01:00 [DBG] Reading data from file 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys\key-9ddaac00-31ec-441e-b630-664712695a2f.xml'.
2020-11-29 12:22:14.421 +01:00 [DBG] Reading data from file 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys\key-a36c8582-4099-4086-ac0c-fa2b681b647b.xml'.
2020-11-29 12:22:14.426 +01:00 [DBG] Found key {9ddaac00-31ec-441e-b630-664712695a2f}.
2020-11-29 12:22:14.430 +01:00 [DBG] Found key {a36c8582-4099-4086-ac0c-fa2b681b647b}.
2020-11-29 12:22:14.436 +01:00 [DBG] Considering key {a36c8582-4099-4086-ac0c-fa2b681b647b} with expiration date 2021-01-03 20:24:43Z as default key.
2020-11-29 12:22:14.444 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-11-29 12:22:14.447 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-11-29 12:22:14.448 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-11-29 12:22:14.452 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-11-29 12:22:14.455 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-11-29 12:22:14.458 +01:00 [DBG] Using key {a36c8582-4099-4086-ac0c-fa2b681b647b} as the default key.
2020-11-29 12:22:14.460 +01:00 [DBG] Key ring with default key {a36c8582-4099-4086-ac0c-fa2b681b647b} was loaded during application startup.
2020-11-29 12:22:14.747 +01:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-29 12:22:14.772 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: B19BE56B0B3907835A2512BD77C9170A2F5F4AFF)
2020-11-29 12:22:14.778 +01:00 [INF] Now listening on: https://localhost:5001
2020-11-29 12:22:14.779 +01:00 [INF] Now listening on: http://localhost:5000
2020-11-29 12:22:14.780 +01:00 [DBG] Loaded hosting startup assembly ProgramowanieRozproszone_1
2020-11-29 12:22:14.781 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-29 12:22:14.782 +01:00 [INF] Hosting environment: Development
2020-11-29 12:22:14.783 +01:00 [INF] Content root path: C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1
2020-11-29 12:22:14.785 +01:00 [DBG] Hosting started
2020-11-29 12:22:17.509 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" accepted.
2020-11-29 12:22:17.511 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" started.
2020-11-29 12:22:17.577 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:22:17.582 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-29 12:22:17.583 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:17.606 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:17.610 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:17.612 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:18.095 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:18.097 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:18.101 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:18.110 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-29 12:22:18.130 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:18.134 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:18.135 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:18.136 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:18.138 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:18.139 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:18.141 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:18.197 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2020-11-29 12:22:18.221 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:18.223 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:18.225 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:18.226 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:18.228 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:18.234 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:18.238 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:18.240 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:18.241 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:18.242 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:18.248 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 103.5594ms
2020-11-29 12:22:18.251 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:18.255 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:22:18.296 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 710.8221 ms
2020-11-29 12:22:18.301 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" completed keep alive response.
2020-11-29 12:22:18.303 +01:00 [INF] Request finished in 729.6544ms 500 text/plain
2020-11-29 12:22:18.307 +01:00 [DBG] Connection id "0HM4KB43R4Q1G", Request id "0HM4KB43R4Q1G:00000001": started reading request body.
2020-11-29 12:22:18.309 +01:00 [DBG] Connection id "0HM4KB43R4Q1G", Request id "0HM4KB43R4Q1G:00000001": done reading request body.
2020-11-29 12:22:18.314 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:22:18.316 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:18.317 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:18.318 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:18.320 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:18.322 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:18.323 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:18.324 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:18.334 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:18.337 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:18.338 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:18.339 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:18.341 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:18.342 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:18.345 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:18.347 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:18.349 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:18.350 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:18.352 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:18.353 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:18.354 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:18.646 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:22:18.761 +01:00 [DBG] queryContext => new QueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache, 
    null, 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, int[], ResultCoordinator, Patient>, 
    ProgramowanieRozproszone_1.Model.DataContext, 
    null
)
2020-11-29 12:22:18.788 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:22:18.812 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (20ms).
2020-11-29 12:22:18.818 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:19.600 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:19.609 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:962f57d0-9e28-49df-b9c0-95925fe7b34a
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:962f57d0-9e28-49df-b9c0-95925fe7b34a
Error Number:40615,State:1,Class:14
2020-11-29 12:22:19.624 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:19.628 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:19.630 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:19.632 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:19.635 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 1289.3779ms
2020-11-29 12:22:19.636 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:19.638 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:962f57d0-9e28-49df-b9c0-95925fe7b34a
Error Number:40615,State:1,Class:14
2020-11-29 12:22:19.660 +01:00 [ERR] HTTP GET /api/patients responded 500 in 1342.6851 ms
2020-11-29 12:22:19.662 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" completed keep alive response.
2020-11-29 12:22:19.665 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:22:19.668 +01:00 [INF] Request finished in 1353.7382ms 500 text/plain
2020-11-29 12:22:21.453 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:22:21.458 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:21.460 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:21.462 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:21.464 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:21.468 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:21.469 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:21.470 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:21.471 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:21.473 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:21.474 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:21.476 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:21.480 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:21.481 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:21.483 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:21.487 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:21.488 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:21.490 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:21.491 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:21.495 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:21.496 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:21.497 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:21.499 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:21.501 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:21.502 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:21.504 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 20.39ms
2020-11-29 12:22:21.505 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:21.506 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:22:21.517 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 57.4540 ms
2020-11-29 12:22:21.519 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" completed keep alive response.
2020-11-29 12:22:21.520 +01:00 [INF] Request finished in 68.7836ms 500 text/plain
2020-11-29 12:22:21.521 +01:00 [DBG] Connection id "0HM4KB43R4Q1G", Request id "0HM4KB43R4Q1G:00000003": started reading request body.
2020-11-29 12:22:21.522 +01:00 [DBG] Connection id "0HM4KB43R4Q1G", Request id "0HM4KB43R4Q1G:00000003": done reading request body.
2020-11-29 12:22:21.525 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:22:21.526 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:21.527 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:21.528 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:21.529 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:21.531 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:21.531 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:21.532 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:21.534 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:21.535 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:21.537 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:21.538 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:21.542 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:21.543 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:21.545 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:21.546 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:21.547 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:21.549 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:21.551 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:21.553 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:21.556 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:21.583 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:22:21.586 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:22:21.587 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2020-11-29 12:22:21.589 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:21.828 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:21.835 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:dc148fc7-f02b-40b7-a1a2-ca0f13203915
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:dc148fc7-f02b-40b7-a1a2-ca0f13203915
Error Number:40615,State:1,Class:14
2020-11-29 12:22:21.849 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:21.853 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:21.854 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:21.856 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:21.857 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 312.5209ms
2020-11-29 12:22:21.859 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:21.861 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:dc148fc7-f02b-40b7-a1a2-ca0f13203915
Error Number:40615,State:1,Class:14
2020-11-29 12:22:21.883 +01:00 [ERR] HTTP GET /api/patients responded 500 in 356.3530 ms
2020-11-29 12:22:21.886 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" completed keep alive response.
2020-11-29 12:22:21.887 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:22:21.888 +01:00 [INF] Request finished in 363.0145ms 500 text/plain
2020-11-29 12:22:22.896 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:22:22.901 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:22.902 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:22.903 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:22.905 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:22.907 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:22.908 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:22.909 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:22.910 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:22.912 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:22.913 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:22.914 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:22.917 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:22.921 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:22.922 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:22.924 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:22.925 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:22.927 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:22.928 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:22.930 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:22.931 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:22.933 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:22.937 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:22.938 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:22.940 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:22.941 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 19.2335ms
2020-11-29 12:22:22.943 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:22.944 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:22:22.956 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 53.6383 ms
2020-11-29 12:22:22.957 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" completed keep alive response.
2020-11-29 12:22:22.958 +01:00 [INF] Request finished in 63.4783ms 500 text/plain
2020-11-29 12:22:22.959 +01:00 [DBG] Connection id "0HM4KB43R4Q1G", Request id "0HM4KB43R4Q1G:00000005": started reading request body.
2020-11-29 12:22:22.960 +01:00 [DBG] Connection id "0HM4KB43R4Q1G", Request id "0HM4KB43R4Q1G:00000005": done reading request body.
2020-11-29 12:22:22.962 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:22:22.962 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:22.963 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:22.966 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:22.968 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:22.970 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:22.970 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:22.971 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:22.972 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:22.974 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:22.975 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:22.977 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:22.978 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:22.982 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:22.985 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:22.986 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:22.987 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:22.989 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:22.990 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:22.991 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:22.993 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:23.000 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:22:23.003 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:22:23.004 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2020-11-29 12:22:23.005 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:23.236 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:23.243 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:1ae5c87a-84ad-4fd2-8317-1a15c548b9c3
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:1ae5c87a-84ad-4fd2-8317-1a15c548b9c3
Error Number:40615,State:1,Class:14
2020-11-29 12:22:23.258 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:23.261 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:23.263 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:23.264 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:23.267 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 282.0539ms
2020-11-29 12:22:23.268 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:23.269 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:1ae5c87a-84ad-4fd2-8317-1a15c548b9c3
Error Number:40615,State:1,Class:14
2020-11-29 12:22:23.291 +01:00 [ERR] HTTP GET /api/patients responded 500 in 327.6819 ms
2020-11-29 12:22:23.293 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" completed keep alive response.
2020-11-29 12:22:23.294 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:22:23.295 +01:00 [INF] Request finished in 333.2133ms 500 text/plain
2020-11-29 12:22:24.226 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:22:24.229 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:24.230 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:24.231 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:24.233 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:24.235 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:24.237 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:24.238 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:24.240 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:24.242 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:24.243 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:24.244 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:24.246 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:24.248 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:24.249 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:24.254 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:24.255 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:24.257 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:24.258 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:24.260 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:24.261 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:24.263 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:24.264 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:24.268 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:24.270 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:24.271 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 22.0537ms
2020-11-29 12:22:24.273 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:24.274 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:22:24.286 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 56.0957 ms
2020-11-29 12:22:24.287 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" completed keep alive response.
2020-11-29 12:22:24.289 +01:00 [INF] Request finished in 62.6251ms 500 text/plain
2020-11-29 12:22:24.290 +01:00 [DBG] Connection id "0HM4KB43R4Q1G", Request id "0HM4KB43R4Q1G:00000007": started reading request body.
2020-11-29 12:22:24.291 +01:00 [DBG] Connection id "0HM4KB43R4Q1G", Request id "0HM4KB43R4Q1G:00000007": done reading request body.
2020-11-29 12:22:24.292 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:22:24.293 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:24.293 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:24.294 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:24.296 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:24.300 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:24.301 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:24.302 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:24.303 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:24.305 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:24.306 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:24.307 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:24.309 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:24.310 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:24.312 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:24.316 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:24.318 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:24.320 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:24.321 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:24.323 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:24.324 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:24.326 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:22:24.328 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:22:24.328 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2020-11-29 12:22:24.332 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:24.781 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:24.786 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:2344b406-d4f9-439a-a532-c442c9c85c1c
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:2344b406-d4f9-439a-a532-c442c9c85c1c
Error Number:40615,State:1,Class:14
2020-11-29 12:22:24.805 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:24.807 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:24.812 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:24.814 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:24.816 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 504.1227ms
2020-11-29 12:22:24.818 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:24.820 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:2344b406-d4f9-439a-a532-c442c9c85c1c
Error Number:40615,State:1,Class:14
2020-11-29 12:22:24.842 +01:00 [ERR] HTTP GET /api/patients responded 500 in 548.9289 ms
2020-11-29 12:22:24.845 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" completed keep alive response.
2020-11-29 12:22:24.846 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:22:24.848 +01:00 [INF] Request finished in 555.4556ms 500 text/plain
2020-11-29 12:22:25.794 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:22:25.798 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:25.799 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:25.800 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:25.802 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:25.804 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:25.805 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:25.806 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:25.807 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:25.809 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:25.810 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:25.811 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:25.813 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:25.814 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:25.819 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:25.821 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:25.822 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:25.824 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:25.825 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:25.827 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:25.828 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:25.830 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:25.834 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:25.835 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:25.837 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:25.838 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 18.7251ms
2020-11-29 12:22:25.839 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:25.841 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:22:25.854 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 54.6285 ms
2020-11-29 12:22:25.855 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" completed keep alive response.
2020-11-29 12:22:25.857 +01:00 [INF] Request finished in 63.4507ms 500 text/plain
2020-11-29 12:22:25.858 +01:00 [DBG] Connection id "0HM4KB43R4Q1G", Request id "0HM4KB43R4Q1G:00000009": started reading request body.
2020-11-29 12:22:25.859 +01:00 [DBG] Connection id "0HM4KB43R4Q1G", Request id "0HM4KB43R4Q1G:00000009": done reading request body.
2020-11-29 12:22:25.860 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:22:25.861 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:25.864 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:25.865 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:25.866 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:25.868 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:25.868 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:25.869 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:25.871 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:25.872 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:25.874 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:25.875 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:25.879 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:25.880 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:25.881 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:25.883 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:25.884 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:25.886 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:25.887 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:25.888 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:25.890 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:25.892 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:22:25.896 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:22:25.897 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2020-11-29 12:22:25.898 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:26.148 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:26.154 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:705179fb-c5bf-4ea2-b681-96d3c1cdcb87
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:705179fb-c5bf-4ea2-b681-96d3c1cdcb87
Error Number:40615,State:1,Class:14
2020-11-29 12:22:26.167 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:26.168 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:26.170 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:26.173 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:26.175 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 293.604ms
2020-11-29 12:22:26.176 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:26.178 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:705179fb-c5bf-4ea2-b681-96d3c1cdcb87
Error Number:40615,State:1,Class:14
2020-11-29 12:22:26.198 +01:00 [ERR] HTTP GET /api/patients responded 500 in 334.0700 ms
2020-11-29 12:22:26.200 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" completed keep alive response.
2020-11-29 12:22:26.204 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:22:26.205 +01:00 [INF] Request finished in 344.6397ms 500 text/plain
2020-11-29 12:22:31.522 +01:00 [INF] Application is shutting down...
2020-11-29 12:22:31.523 +01:00 [DBG] Hosting stopping
2020-11-29 12:22:31.529 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" disconnecting.
2020-11-29 12:22:31.534 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" stopped.
2020-11-29 12:22:31.536 +01:00 [DBG] Connection id "0HM4KB43R4Q1G" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-29 12:22:31.542 +01:00 [DBG] Hosting stopped
2020-11-29 12:22:39.039 +01:00 [DBG] Hosting starting
2020-11-29 12:22:39.132 +01:00 [INF] User profile is available. Using 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-11-29 12:22:39.142 +01:00 [DBG] Reading data from file 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys\key-9ddaac00-31ec-441e-b630-664712695a2f.xml'.
2020-11-29 12:22:39.148 +01:00 [DBG] Reading data from file 'C:\Users\Dominik\AppData\Local\ASP.NET\DataProtection-Keys\key-a36c8582-4099-4086-ac0c-fa2b681b647b.xml'.
2020-11-29 12:22:39.153 +01:00 [DBG] Found key {9ddaac00-31ec-441e-b630-664712695a2f}.
2020-11-29 12:22:39.157 +01:00 [DBG] Found key {a36c8582-4099-4086-ac0c-fa2b681b647b}.
2020-11-29 12:22:39.164 +01:00 [DBG] Considering key {a36c8582-4099-4086-ac0c-fa2b681b647b} with expiration date 2021-01-03 20:24:43Z as default key.
2020-11-29 12:22:39.172 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-11-29 12:22:39.176 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-11-29 12:22:39.178 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-11-29 12:22:39.181 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-11-29 12:22:39.184 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-11-29 12:22:39.187 +01:00 [DBG] Using key {a36c8582-4099-4086-ac0c-fa2b681b647b} as the default key.
2020-11-29 12:22:39.188 +01:00 [DBG] Key ring with default key {a36c8582-4099-4086-ac0c-fa2b681b647b} was loaded during application startup.
2020-11-29 12:22:39.457 +01:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-29 12:22:39.481 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: B19BE56B0B3907835A2512BD77C9170A2F5F4AFF)
2020-11-29 12:22:39.488 +01:00 [INF] Now listening on: https://localhost:5001
2020-11-29 12:22:39.489 +01:00 [INF] Now listening on: http://localhost:5000
2020-11-29 12:22:39.491 +01:00 [DBG] Loaded hosting startup assembly ProgramowanieRozproszone_1
2020-11-29 12:22:39.492 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-29 12:22:39.493 +01:00 [INF] Hosting environment: Development
2020-11-29 12:22:39.494 +01:00 [INF] Content root path: C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1
2020-11-29 12:22:39.494 +01:00 [DBG] Hosting started
2020-11-29 12:22:46.333 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" accepted.
2020-11-29 12:22:46.335 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" started.
2020-11-29 12:22:46.402 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:22:46.407 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-29 12:22:46.408 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:46.431 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:46.436 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:46.438 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:46.906 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:46.909 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:46.913 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:46.921 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-29 12:22:46.944 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:46.947 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:46.949 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:46.950 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:46.952 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:46.953 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:46.955 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:47.009 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2020-11-29 12:22:47.033 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:47.035 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:47.037 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:47.039 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:47.041 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:47.046 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:47.050 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:47.051 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:47.053 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:47.054 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:47.062 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 103.7265ms
2020-11-29 12:22:47.064 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:47.067 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:22:47.110 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 699.6599 ms
2020-11-29 12:22:47.113 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:22:47.116 +01:00 [INF] Request finished in 717.449ms 500 text/plain
2020-11-29 12:22:47.122 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:00000001": started reading request body.
2020-11-29 12:22:47.123 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:00000001": done reading request body.
2020-11-29 12:22:47.129 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:22:47.130 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:47.131 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:47.134 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:47.135 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:47.137 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:47.139 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:47.140 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:47.150 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:47.152 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:47.153 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:47.155 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:47.157 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:47.158 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:47.159 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:47.161 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:47.164 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:47.167 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:47.169 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:47.170 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:47.172 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:47.471 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:22:47.577 +01:00 [DBG] queryContext => new QueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache, 
    null, 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, int[], ResultCoordinator, Patient>, 
    ProgramowanieRozproszone_1.Model.DataContext, 
    null
)
2020-11-29 12:22:47.604 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:22:47.629 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (21ms).
2020-11-29 12:22:47.636 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:48.204 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:48.215 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:73d8523a-33d7-43ce-ace8-50fef2079e00
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:73d8523a-33d7-43ce-ace8-50fef2079e00
Error Number:40615,State:1,Class:14
2020-11-29 12:22:48.235 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:48.237 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:48.241 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:48.242 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:48.245 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 1085.3581ms
2020-11-29 12:22:48.246 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:48.248 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:73d8523a-33d7-43ce-ace8-50fef2079e00
Error Number:40615,State:1,Class:14
2020-11-29 12:22:48.271 +01:00 [ERR] HTTP GET /api/patients responded 500 in 1139.6008 ms
2020-11-29 12:22:48.273 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:22:48.275 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:22:48.278 +01:00 [INF] Request finished in 1149.7459ms 500 text/plain
2020-11-29 12:22:50.201 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:22:50.205 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:50.207 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:50.209 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:50.211 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:50.216 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:50.219 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:50.221 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:50.222 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:50.224 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:50.225 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:50.226 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:50.228 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:50.229 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:50.231 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:50.237 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:50.239 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:50.240 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:50.242 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:50.243 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:50.245 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:50.246 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:50.250 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:50.251 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:50.253 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:50.255 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 23.2872ms
2020-11-29 12:22:50.256 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:50.257 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:22:50.269 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 62.5008 ms
2020-11-29 12:22:50.271 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:22:50.272 +01:00 [INF] Request finished in 72.3854ms 500 text/plain
2020-11-29 12:22:50.273 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:00000003": started reading request body.
2020-11-29 12:22:50.274 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:00000003": done reading request body.
2020-11-29 12:22:50.276 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:22:50.276 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:50.277 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:50.278 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:50.281 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:50.285 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:50.286 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:50.288 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:50.289 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:50.291 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:50.292 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:50.293 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:50.298 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:50.299 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:50.300 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:50.302 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:50.303 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:50.305 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:50.307 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:50.308 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:50.309 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:50.338 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:22:50.340 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:22:50.342 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2020-11-29 12:22:50.343 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:50.572 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:50.578 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:39b9cd48-9326-4245-95d2-f6797fd5041b
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:39b9cd48-9326-4245-95d2-f6797fd5041b
Error Number:40615,State:1,Class:14
2020-11-29 12:22:50.594 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:50.595 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:50.596 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:50.598 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:50.600 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 299.3672ms
2020-11-29 12:22:50.602 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:50.603 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:39b9cd48-9326-4245-95d2-f6797fd5041b
Error Number:40615,State:1,Class:14
2020-11-29 12:22:50.624 +01:00 [ERR] HTTP GET /api/patients responded 500 in 346.8859 ms
2020-11-29 12:22:50.626 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:22:50.628 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:22:50.629 +01:00 [INF] Request finished in 353.3259ms 500 text/plain
2020-11-29 12:22:52.247 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:22:52.253 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:52.254 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:52.255 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:52.256 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:52.259 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:52.260 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:52.261 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:52.262 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:52.264 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:52.265 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:52.266 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:52.268 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:52.269 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:52.271 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:52.273 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:52.277 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:52.278 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:52.280 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:52.282 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:52.283 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:52.285 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:52.286 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:52.287 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:52.291 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:52.293 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 22.0224ms
2020-11-29 12:22:52.294 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:52.295 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:22:52.305 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 51.0559 ms
2020-11-29 12:22:52.308 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:22:52.309 +01:00 [INF] Request finished in 62.8455ms 500 text/plain
2020-11-29 12:22:52.310 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:00000005": started reading request body.
2020-11-29 12:22:52.311 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:00000005": done reading request body.
2020-11-29 12:22:52.313 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:22:52.313 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:52.314 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:52.315 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:52.317 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:52.318 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:52.319 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:52.322 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:52.323 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:52.325 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:52.326 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:52.327 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:52.329 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:52.330 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:52.332 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:52.334 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:52.335 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:52.339 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:52.340 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:52.342 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:52.343 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:52.351 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:22:52.355 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:22:52.356 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2020-11-29 12:22:52.357 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:52.592 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:52.595 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:b8682c1a-22b2-452d-9c63-8f9b6a81541b
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:b8682c1a-22b2-452d-9c63-8f9b6a81541b
Error Number:40615,State:1,Class:14
2020-11-29 12:22:52.610 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:52.611 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:52.613 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:52.614 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:52.619 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 286.4532ms
2020-11-29 12:22:52.620 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:52.622 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:b8682c1a-22b2-452d-9c63-8f9b6a81541b
Error Number:40615,State:1,Class:14
2020-11-29 12:22:52.642 +01:00 [ERR] HTTP GET /api/patients responded 500 in 327.9642 ms
2020-11-29 12:22:52.644 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:22:52.645 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:22:52.646 +01:00 [INF] Request finished in 333.9029ms 500 text/plain
2020-11-29 12:22:54.631 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:22:54.636 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:54.637 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:54.638 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:54.639 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:54.641 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:54.642 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:54.644 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:54.646 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:54.648 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:54.649 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:54.650 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:54.652 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:54.653 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:54.655 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:54.657 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:54.658 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:54.662 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:54.663 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:54.665 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:54.666 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:54.668 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:54.669 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:54.671 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:54.672 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:54.674 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 18.595ms
2020-11-29 12:22:54.675 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:22:54.679 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:22:54.686 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 49.4927 ms
2020-11-29 12:22:54.688 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:22:54.689 +01:00 [INF] Request finished in 58.0082ms 500 text/plain
2020-11-29 12:22:54.690 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:00000007": started reading request body.
2020-11-29 12:22:54.691 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:00000007": done reading request body.
2020-11-29 12:22:54.694 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:22:54.695 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:22:54.696 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:22:54.697 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:22:54.699 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:54.700 +01:00 [INF] Successfully validated the token.
2020-11-29 12:22:54.701 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:22:54.702 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:54.703 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:22:54.705 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:22:54.706 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:22:54.709 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:22:54.711 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:22:54.712 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:22:54.714 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:54.715 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:22:54.717 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:54.718 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:54.719 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:54.721 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:54.722 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:22:54.726 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:22:54.728 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:22:54.729 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2020-11-29 12:22:54.730 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:55.049 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:22:55.052 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:699436aa-194a-4c7d-9213-4b8ce5647c97
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:699436aa-194a-4c7d-9213-4b8ce5647c97
Error Number:40615,State:1,Class:14
2020-11-29 12:22:55.070 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:55.071 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:22:55.073 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:55.074 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:22:55.077 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 363.2141ms
2020-11-29 12:22:55.078 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:22:55.080 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:699436aa-194a-4c7d-9213-4b8ce5647c97
Error Number:40615,State:1,Class:14
2020-11-29 12:22:55.111 +01:00 [ERR] HTTP GET /api/patients responded 500 in 415.6558 ms
2020-11-29 12:22:55.117 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:22:55.118 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:22:55.119 +01:00 [INF] Request finished in 424.6584ms 500 text/plain
2020-11-29 12:23:58.635 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:23:58.642 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:23:58.647 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:23:58.650 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:23:58.654 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:23:58.658 +01:00 [INF] Successfully validated the token.
2020-11-29 12:23:58.659 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:23:58.661 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:23:58.662 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:23:58.665 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:23:58.667 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:23:58.668 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:23:58.673 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:23:58.674 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:23:58.676 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:23:58.678 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:23:58.680 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:23:58.682 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:23:58.683 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:23:58.687 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:23:58.690 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:23:58.691 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:23:58.693 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:23:58.694 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:23:58.697 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:23:58.699 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 22.9838ms
2020-11-29 12:23:58.700 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:23:58.704 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:23:58.716 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 70.0897 ms
2020-11-29 12:23:58.720 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:23:58.721 +01:00 [INF] Request finished in 86.788ms 500 text/plain
2020-11-29 12:23:58.722 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:00000009": started reading request body.
2020-11-29 12:23:58.723 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:00000009": done reading request body.
2020-11-29 12:23:58.725 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:23:58.726 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:23:58.727 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:23:58.727 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:23:58.729 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:23:58.732 +01:00 [INF] Successfully validated the token.
2020-11-29 12:23:58.735 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:23:58.736 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:23:58.737 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:23:58.739 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:23:58.741 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:23:58.742 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:23:58.744 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:23:58.745 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:23:58.747 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:23:58.749 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:23:58.753 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:23:58.754 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:23:58.755 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:23:58.757 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:23:58.758 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:23:58.760 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:23:58.762 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:23:58.763 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2020-11-29 12:23:58.764 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:23:59.190 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:23:59.197 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:849fa52f-5f47-47cb-9e3d-0c69826aa892
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:849fa52f-5f47-47cb-9e3d-0c69826aa892
Error Number:40615,State:1,Class:14
2020-11-29 12:23:59.214 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:23:59.217 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:23:59.219 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:23:59.221 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:23:59.222 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 475.6016ms
2020-11-29 12:23:59.224 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:23:59.225 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:849fa52f-5f47-47cb-9e3d-0c69826aa892
Error Number:40615,State:1,Class:14
2020-11-29 12:23:59.246 +01:00 [ERR] HTTP GET /api/patients responded 500 in 519.8479 ms
2020-11-29 12:23:59.250 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:23:59.251 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:23:59.252 +01:00 [INF] Request finished in 527.2251ms 500 text/plain
2020-11-29 12:24:07.047 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:24:07.049 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:24:07.050 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:24:07.051 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:24:07.054 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:07.056 +01:00 [INF] Successfully validated the token.
2020-11-29 12:24:07.057 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:24:07.059 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:07.061 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:24:07.066 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:24:07.067 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:24:07.068 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:24:07.071 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:24:07.073 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:24:07.075 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:07.079 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:07.083 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:07.084 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:07.086 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:07.088 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:07.089 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:24:07.091 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:07.092 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:07.096 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:07.097 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:07.099 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 23.89ms
2020-11-29 12:24:07.101 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:07.102 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:24:07.114 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 63.3327 ms
2020-11-29 12:24:07.116 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:24:07.117 +01:00 [INF] Request finished in 70.009ms 500 text/plain
2020-11-29 12:24:07.118 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:0000000B": started reading request body.
2020-11-29 12:24:07.119 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:0000000B": done reading request body.
2020-11-29 12:24:07.121 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:24:07.122 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:24:07.122 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:24:07.123 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:24:07.125 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:07.129 +01:00 [INF] Successfully validated the token.
2020-11-29 12:24:07.130 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:24:07.132 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:07.133 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:24:07.135 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:24:07.136 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:24:07.137 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:24:07.139 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:24:07.140 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:24:07.144 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:07.146 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:07.148 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:07.150 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:07.152 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:07.153 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:07.155 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:24:07.157 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:24:07.160 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:24:07.162 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2020-11-29 12:24:07.164 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:24:07.452 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:24:07.457 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:3832ce25-4180-4c0a-913e-4d6681d39250
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:3832ce25-4180-4c0a-913e-4d6681d39250
Error Number:40615,State:1,Class:14
2020-11-29 12:24:07.476 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:07.480 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:07.482 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:07.486 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:07.488 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 344.3866ms
2020-11-29 12:24:07.489 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:07.491 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:3832ce25-4180-4c0a-913e-4d6681d39250
Error Number:40615,State:1,Class:14
2020-11-29 12:24:07.516 +01:00 [ERR] HTTP GET /api/patients responded 500 in 393.3045 ms
2020-11-29 12:24:07.519 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:24:07.520 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:24:07.522 +01:00 [INF] Request finished in 400.7624ms 500 text/plain
2020-11-29 12:24:24.947 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:24:24.952 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:24:24.953 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:24:24.954 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:24:24.955 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:24.957 +01:00 [INF] Successfully validated the token.
2020-11-29 12:24:24.958 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:24:24.959 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:24.961 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:24:24.963 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:24:24.964 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:24:24.965 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:24:24.967 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:24:24.969 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:24:24.973 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:24.975 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:24.976 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:24.978 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:24.979 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:24.981 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:24.982 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:24:24.984 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:24.987 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:24.988 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:24.990 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:24.991 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 18.4404ms
2020-11-29 12:24:24.993 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:24.994 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:24:25.006 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 53.2429 ms
2020-11-29 12:24:25.007 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:24:25.008 +01:00 [INF] Request finished in 61.283ms 500 text/plain
2020-11-29 12:24:25.020 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:0000000D": started reading request body.
2020-11-29 12:24:25.021 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:0000000D": done reading request body.
2020-11-29 12:24:25.023 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:24:25.024 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:24:25.024 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:24:25.025 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:24:25.027 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:25.030 +01:00 [INF] Successfully validated the token.
2020-11-29 12:24:25.031 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:24:25.034 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:25.035 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:24:25.037 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:24:25.038 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:24:25.039 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:24:25.041 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:24:25.042 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:24:25.044 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:25.046 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:25.050 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:25.051 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:25.052 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:25.054 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:25.055 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:24:25.057 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:24:25.059 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:24:25.059 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2020-11-29 12:24:25.060 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:24:25.422 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:24:25.427 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:c5fd36b1-5f9a-4b58-a3e5-0e5c0a72e766
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:c5fd36b1-5f9a-4b58-a3e5-0e5c0a72e766
Error Number:40615,State:1,Class:14
2020-11-29 12:24:25.442 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:25.443 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:25.445 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:25.447 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:25.448 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 404.2859ms
2020-11-29 12:24:25.452 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:25.454 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:c5fd36b1-5f9a-4b58-a3e5-0e5c0a72e766
Error Number:40615,State:1,Class:14
2020-11-29 12:24:25.475 +01:00 [ERR] HTTP GET /api/patients responded 500 in 450.9309 ms
2020-11-29 12:24:25.478 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:24:25.479 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:24:25.483 +01:00 [INF] Request finished in 460.3108ms 500 text/plain
2020-11-29 12:24:26.435 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:24:26.439 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:24:26.441 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:24:26.442 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:24:26.443 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:26.446 +01:00 [INF] Successfully validated the token.
2020-11-29 12:24:26.446 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:24:26.448 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:26.449 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:24:26.451 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:24:26.452 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:24:26.453 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:24:26.455 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:24:26.459 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:24:26.461 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:26.463 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:26.464 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:26.465 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:26.467 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:26.468 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:26.470 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:24:26.474 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:26.475 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:26.477 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:26.479 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:26.481 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 20.2454ms
2020-11-29 12:24:26.484 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:26.485 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:24:26.496 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 55.4310 ms
2020-11-29 12:24:26.497 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:24:26.499 +01:00 [INF] Request finished in 63.7468ms 500 text/plain
2020-11-29 12:24:26.500 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:0000000F": started reading request body.
2020-11-29 12:24:26.500 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:0000000F": done reading request body.
2020-11-29 12:24:26.505 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:24:26.506 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:24:26.507 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:24:26.508 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:24:26.510 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:26.513 +01:00 [INF] Successfully validated the token.
2020-11-29 12:24:26.514 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:24:26.515 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:26.516 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:24:26.521 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:24:26.522 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:24:26.523 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:24:26.525 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:24:26.527 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:24:26.529 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:26.531 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:26.532 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:26.535 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:26.537 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:26.539 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:26.541 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:24:26.543 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:24:26.546 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:24:26.547 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2020-11-29 12:24:26.550 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:24:26.779 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:24:26.818 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:a48931d9-2c1e-4bd9-a2f3-9f6ac84c3b0d
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:a48931d9-2c1e-4bd9-a2f3-9f6ac84c3b0d
Error Number:40615,State:1,Class:14
2020-11-29 12:24:26.841 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:26.842 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:26.847 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:26.851 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:26.852 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 323.6883ms
2020-11-29 12:24:26.855 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:26.857 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:a48931d9-2c1e-4bd9-a2f3-9f6ac84c3b0d
Error Number:40615,State:1,Class:14
2020-11-29 12:24:26.883 +01:00 [ERR] HTTP GET /api/patients responded 500 in 376.1822 ms
2020-11-29 12:24:26.885 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:24:26.887 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:24:26.888 +01:00 [INF] Request finished in 383.3719ms 500 text/plain
2020-11-29 12:24:40.581 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:24:40.584 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:24:40.588 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:24:40.589 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:24:40.590 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:40.592 +01:00 [INF] Successfully validated the token.
2020-11-29 12:24:40.593 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:24:40.594 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:40.595 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:24:40.597 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:24:40.598 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:24:40.601 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:24:40.603 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:24:40.605 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:24:40.606 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:40.608 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:40.609 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:40.611 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:40.612 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:40.613 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:40.615 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:24:40.619 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:40.620 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:40.622 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:40.623 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:40.625 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 18.7419ms
2020-11-29 12:24:40.626 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:40.628 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:24:40.638 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 50.5353 ms
2020-11-29 12:24:40.640 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:24:40.641 +01:00 [INF] Request finished in 59.9671ms 500 text/plain
2020-11-29 12:24:40.642 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:00000011": started reading request body.
2020-11-29 12:24:40.643 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:00000011": done reading request body.
2020-11-29 12:24:40.644 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:24:40.645 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:24:40.646 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:24:40.650 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:24:40.651 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:40.653 +01:00 [INF] Successfully validated the token.
2020-11-29 12:24:40.653 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:24:40.654 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:40.656 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:24:40.658 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:24:40.659 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:24:40.660 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:24:40.662 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:24:40.666 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:24:40.668 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:40.669 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:40.671 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:40.672 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:40.674 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:40.675 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:40.676 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:24:40.679 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:24:40.683 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:24:40.684 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2020-11-29 12:24:40.685 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:24:41.082 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:24:41.089 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0aa023e6-2e75-4844-946d-a4c21a487378
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0aa023e6-2e75-4844-946d-a4c21a487378
Error Number:40615,State:1,Class:14
2020-11-29 12:24:41.103 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:41.104 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:41.106 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:41.109 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:41.111 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 443.4222ms
2020-11-29 12:24:41.113 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:41.114 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:0aa023e6-2e75-4844-946d-a4c21a487378
Error Number:40615,State:1,Class:14
2020-11-29 12:24:41.134 +01:00 [ERR] HTTP GET /api/patients responded 500 in 487.9063 ms
2020-11-29 12:24:41.136 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:24:41.140 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:24:41.141 +01:00 [INF] Request finished in 496.9602ms 500 text/plain
2020-11-29 12:24:44.433 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:5001/api/patients text/plain; charset=utf-8 3
2020-11-29 12:24:44.436 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:24:44.437 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:24:44.438 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:24:44.440 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:44.441 +01:00 [INF] Successfully validated the token.
2020-11-29 12:24:44.442 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:24:44.443 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:44.445 +01:00 [INF] Route matched with {action = "InvalidAction", controller = "Patients"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult InvalidAction() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:24:44.446 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:24:44.448 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:24:44.449 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:24:44.453 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:24:44.454 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:24:44.456 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:44.457 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:44.459 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:44.460 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:44.462 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:44.463 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:44.467 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:24:44.469 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:44.471 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:44.472 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:44.474 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:44.477 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1) in 21.3455ms
2020-11-29 12:24:44.479 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction (ProgramowanieRozproszone_1)'
2020-11-29 12:24:44.482 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Problem z aplikacją
   at ProgramowanieRozproszone_1.Controllers.PatientsController.InvalidAction() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 32
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-29 12:24:44.490 +01:00 [ERR] HTTP PUT /api/patients responded 500 in 52.8583 ms
2020-11-29 12:24:44.491 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:24:44.492 +01:00 [INF] Request finished in 59.459ms 500 text/plain
2020-11-29 12:24:44.494 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:00000013": started reading request body.
2020-11-29 12:24:44.496 +01:00 [DBG] Connection id "0HM4KB4CE0UKI", Request id "0HM4KB4CE0UKI:00000013": done reading request body.
2020-11-29 12:24:44.500 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:24:44.501 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:24:44.502 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:24:44.503 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:24:44.504 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:44.506 +01:00 [INF] Successfully validated the token.
2020-11-29 12:24:44.507 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:24:44.508 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:44.509 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:24:44.514 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:24:44.516 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:24:44.517 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:24:44.519 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:24:44.521 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:24:44.523 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:44.524 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:24:44.526 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:44.530 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:44.531 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:44.533 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:44.534 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:24:44.536 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:24:44.538 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:24:44.539 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2020-11-29 12:24:44.540 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:24:44.824 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:24:44.832 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:41cab3b2-bc73-4ad1-9e8e-338ed14f1dc2
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:41cab3b2-bc73-4ad1-9e8e-338ed14f1dc2
Error Number:40615,State:1,Class:14
2020-11-29 12:24:44.849 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:44.851 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:24:44.855 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:44.857 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:24:44.859 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 336.0127ms
2020-11-29 12:24:44.860 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:24:44.862 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:41cab3b2-bc73-4ad1-9e8e-338ed14f1dc2
Error Number:40615,State:1,Class:14
2020-11-29 12:24:44.881 +01:00 [ERR] HTTP GET /api/patients responded 500 in 379.6863 ms
2020-11-29 12:24:44.886 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" completed keep alive response.
2020-11-29 12:24:44.888 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:24:44.889 +01:00 [INF] Request finished in 388.854ms 500 text/plain
2020-11-29 12:25:36.414 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" reset.
2020-11-29 12:25:36.422 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" sending FIN because: "The client closed the connection."
2020-11-29 12:25:36.424 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" disconnecting.
2020-11-29 12:25:36.429 +01:00 [DBG] Connection id "0HM4KB4CE0UKI" stopped.
2020-11-29 12:25:41.637 +01:00 [DBG] Connection id "0HM4KB4CE0UKJ" accepted.
2020-11-29 12:25:41.639 +01:00 [DBG] Connection id "0HM4KB4CE0UKJ" started.
2020-11-29 12:25:41.662 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:25:41.664 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:25:41.665 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:25:41.666 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:25:41.668 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:25:41.670 +01:00 [INF] Successfully validated the token.
2020-11-29 12:25:41.671 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:25:41.672 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:25:41.673 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:25:41.675 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:25:41.676 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:25:41.677 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:25:41.682 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:25:41.683 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:25:41.684 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:25:41.686 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:25:41.687 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:41.689 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:41.690 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:41.692 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:41.697 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:25:41.699 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:25:41.702 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:25:41.703 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2020-11-29 12:25:41.704 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:25:42.109 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:25:42.112 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7810a3e3-88b8-4cc9-8241-d62a38148149
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7810a3e3-88b8-4cc9-8241-d62a38148149
Error Number:40615,State:1,Class:14
2020-11-29 12:25:42.134 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:42.137 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:42.138 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:42.140 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:42.142 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 457.6456ms
2020-11-29 12:25:42.143 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:25:42.145 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:7810a3e3-88b8-4cc9-8241-d62a38148149
Error Number:40615,State:1,Class:14
2020-11-29 12:25:42.165 +01:00 [ERR] HTTP GET /api/patients responded 500 in 500.4190 ms
2020-11-29 12:25:42.167 +01:00 [DBG] Connection id "0HM4KB4CE0UKJ" completed keep alive response.
2020-11-29 12:25:42.168 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:25:42.169 +01:00 [INF] Request finished in 507.5538ms 500 text/plain
2020-11-29 12:25:44.140 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:25:44.142 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:25:44.143 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:25:44.144 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:25:44.145 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:25:44.147 +01:00 [INF] Successfully validated the token.
2020-11-29 12:25:44.148 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:25:44.149 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:25:44.150 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:25:44.152 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:25:44.153 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:25:44.154 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:25:44.156 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:25:44.160 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:25:44.162 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:25:44.163 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:25:44.165 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:44.166 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:44.167 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:44.169 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:44.170 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:25:44.172 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:25:44.177 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:25:44.179 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2020-11-29 12:25:44.181 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:25:44.395 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:25:44.409 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:3c74645b-40bb-4e7f-b74e-dc2c63f5d602
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:3c74645b-40bb-4e7f-b74e-dc2c63f5d602
Error Number:40615,State:1,Class:14
2020-11-29 12:25:44.430 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:44.432 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:44.433 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:44.434 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:44.436 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 274.4524ms
2020-11-29 12:25:44.439 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:25:44.441 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:3c74645b-40bb-4e7f-b74e-dc2c63f5d602
Error Number:40615,State:1,Class:14
2020-11-29 12:25:44.465 +01:00 [ERR] HTTP GET /api/patients responded 500 in 321.8277 ms
2020-11-29 12:25:44.467 +01:00 [DBG] Connection id "0HM4KB4CE0UKJ" completed keep alive response.
2020-11-29 12:25:44.471 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:25:44.472 +01:00 [INF] Request finished in 332.295ms 500 text/plain
2020-11-29 12:25:47.077 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:25:47.081 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:25:47.082 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:25:47.083 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:25:47.085 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:25:47.088 +01:00 [INF] Successfully validated the token.
2020-11-29 12:25:47.089 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:25:47.092 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:25:47.094 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:25:47.096 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:25:47.098 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:25:47.099 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:25:47.102 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:25:47.103 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:25:47.107 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:25:47.109 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:25:47.110 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:47.112 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:47.114 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:47.115 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:47.117 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:25:47.118 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:25:47.120 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:25:47.123 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2020-11-29 12:25:47.124 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:25:47.379 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:25:47.382 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7e0a04e4-8700-48a4-ab78-116bae74e9f4
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7e0a04e4-8700-48a4-ab78-116bae74e9f4
Error Number:40615,State:1,Class:14
2020-11-29 12:25:47.395 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:47.396 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:47.398 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:47.399 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:47.403 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 296.0204ms
2020-11-29 12:25:47.404 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:25:47.405 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:7e0a04e4-8700-48a4-ab78-116bae74e9f4
Error Number:40615,State:1,Class:14
2020-11-29 12:25:47.424 +01:00 [ERR] HTTP GET /api/patients responded 500 in 342.0803 ms
2020-11-29 12:25:47.425 +01:00 [DBG] Connection id "0HM4KB4CE0UKJ" completed keep alive response.
2020-11-29 12:25:47.426 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:25:47.427 +01:00 [INF] Request finished in 350.0983ms 500 text/plain
2020-11-29 12:25:48.646 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/patients  
2020-11-29 12:25:48.650 +01:00 [VRB] All hosts are allowed.
2020-11-29 12:25:48.651 +01:00 [DBG] 1 candidate(s) found for the request path '/api/patients'
2020-11-29 12:25:48.652 +01:00 [DBG] Endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)' with route pattern 'api/Patients' is valid for the request path '/api/patients'
2020-11-29 12:25:48.654 +01:00 [DBG] Request matched endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:25:48.656 +01:00 [INF] Successfully validated the token.
2020-11-29 12:25:48.657 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2020-11-29 12:25:48.658 +01:00 [INF] Executing endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:25:48.660 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1).
2020-11-29 12:25:48.661 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-29 12:25:48.663 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-29 12:25:48.664 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-29 12:25:48.666 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-29 12:25:48.667 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-29 12:25:48.671 +01:00 [DBG] Executing controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:25:48.673 +01:00 [DBG] Executed controller factory for controller ProgramowanieRozproszone_1.Controllers.PatientsController (ProgramowanieRozproszone_1)
2020-11-29 12:25:48.675 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:48.677 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:48.679 +01:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:48.680 +01:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:48.682 +01:00 [INF] Executing action method ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) - Validation state: "Valid"
2020-11-29 12:25:48.685 +01:00 [INF] Entity Framework Core 3.1.8 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-11-29 12:25:48.688 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2020-11-29 12:25:48.689 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2020-11-29 12:25:48.690 +01:00 [DBG] Opening connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:25:48.889 +01:00 [ERR] An error occurred using the connection to database 'pr' on server 'tcp:prdmalinowski.database.windows.net,1433'.
2020-11-29 12:25:48.896 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ProgramowanieRozproszone_1.Model.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:5c3a1937-6ce8-40b3-bc24-df043bf4c1c9
Error Number:40615,State:1,Class:14
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:5c3a1937-6ce8-40b3-bc24-df043bf4c1c9
Error Number:40615,State:1,Class:14
2020-11-29 12:25:48.911 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:48.912 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2020-11-29 12:25:48.914 +01:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:48.918 +01:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2020-11-29 12:25:48.920 +01:00 [INF] Executed action ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1) in 248.346ms
2020-11-29 12:25:48.922 +01:00 [INF] Executed endpoint 'ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll (ProgramowanieRozproszone_1)'
2020-11-29 12:25:48.923 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open server 'prdmalinowski' requested by the login. Client with IP address '89.64.82.203' is not allowed to access the server.  To enable access, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range.  It may take up to five minutes for this change to take effect.
   at Microsoft.Data.ProviderBase.DbConnectionPool.CheckPoolBlockingPeriod(Exception e)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ProgramowanieRozproszone_1.Controllers.PatientsController.GetAll() in C:\Users\Dominik\Desktop\Projekty\Programowanie Rozproszone\ProgramowanieRozproszone_1\Controllers\PatientsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:5c3a1937-6ce8-40b3-bc24-df043bf4c1c9
Error Number:40615,State:1,Class:14
2020-11-29 12:25:48.946 +01:00 [ERR] HTTP GET /api/patients responded 500 in 294.7573 ms
2020-11-29 12:25:48.949 +01:00 [DBG] Connection id "0HM4KB4CE0UKJ" completed keep alive response.
2020-11-29 12:25:48.950 +01:00 [DBG] 'DataContext' disposed.
2020-11-29 12:25:48.951 +01:00 [INF] Request finished in 304.8819ms 500 text/plain
2020-11-29 12:25:54.698 +01:00 [DBG] Connection id "0HM4KB4CE0UKJ" reset.
2020-11-29 12:25:54.702 +01:00 [DBG] Connection id "0HM4KB4CE0UKJ" disconnecting.
2020-11-29 12:25:54.705 +01:00 [DBG] Connection id "0HM4KB4CE0UKJ" sending FIN because: "The client closed the connection."
2020-11-29 12:25:54.721 +01:00 [DBG] Connection id "0HM4KB4CE0UKJ" stopped.
2020-11-29 12:25:55.365 +01:00 [INF] Application is shutting down...
2020-11-29 12:25:55.366 +01:00 [DBG] Hosting stopping
2020-11-29 12:25:55.371 +01:00 [DBG] Hosting stopped
